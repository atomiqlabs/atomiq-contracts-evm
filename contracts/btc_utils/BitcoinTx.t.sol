// SPDX-License-Identifier: Apache-2.0
pragma solidity ^0.8.28;

import {Test} from "forge-std/Test.sol";
import {console} from "forge-std/console.sol";

import "./BitcoinTx.sol";

contract BitcoinTxTest is Test {

    using BitcoinTxImpl for BitcoinTx;
    using BitcoinTxInputImpl for BitcoinTxInput;
    using BitcoinTxOutputImpl for BitcoinTxOutput;

    function test_bitcoinTxParse() public returns (bytes32) {
        bytes memory data = hex"0100000030ac49416b5c9225c4a6533701c7f589bcb3bd7c4ffa84dbb45e88dea860e0e651000000006a47304402201b82bf0b2d4d15621a0df600d301a3a37cb612d6cd1dc7667074d7c1447f2adf022020fb66091a4c820e1e08cf4e8c39f113d1a86612732af11eb08076abe4d5bf150121022580490eb263ddcc1e72a1940d5e176c526b5fbdc51a3450afb15d2cd250e3ffffffffff18cb1969f25cd5f720561dfdbf19b5a20632ba9a10e60784f93d522eb35d282d000000006b483045022100b2ffdb97e87503aaaa23fa161a5a4fd203631c50354ed4a91e41a251a39db54e02205b61245459231d734943baa870be5070a5ce4fb4ddc289ce60e793f398587b32012103a9d8f7b6040089063d655ee7ba01751721619d8f88f08e06e5162764982198a6ffffffff7153539740b375ea162c2204b2761812bfaf9d5e0d2b441f5f69adf4a94bbb9d000000006a4730440220040c296a8f2aa107ef0ef4dc12fff4fc7b98d39b9ee1f96f409537dc61fd703d022076b9b1d401b9bebc9bed6e9d96e75d74e494bcc96be86c33127d99a04b636734012102dbef80f2f9b820a1057717f79eac181fea0d30ef7faf494945dc38cf8265dddcfffffffffc763be15771898df90276b3d0c137137c6ee04b133bc31972ca22f57b84eb80000000006b483045022100a969ede984b36602c49013133c5fe8a40b10ac739304076c7641de4c053d2bd802200ffc866c61ed5b1b0d33a0c35253f508ac239e2cbb28619ac9b044328335de39012102e4426608ae3098941d2b6b86ca6f64bbbe54d6fb54036693496bd77d6e500233ffffffff9ccf7d3dfbddcd7017339ca3c6123e96f3645673595ce523ff09c00b481d577a000000006a4730440220625a001d418670511e43af6fd3b1944dcdc2956676d2c124147849449ba1ae7c0220066fdc7b3d43dc713a5fa88779d09cedccdae64ee088a864a032b4d000ee9fb6012103cebc6d26bc5c294d0d360329a7d1b7b600896a265480ffed956fcaa86200e4b0fffffffff8ca1aaa972b8f02682570a89fb87ef3bdadba518833dbef1f115c8b5d1d91a4040000006a4730440220317a2da6508b4ba0a9a89ca6afa3c2d756982a856d12e5a066d2a6624c25f9fb022046b2e3ec2a29164c17f003a2032732639bc382f5285cb012908a866196faaee3012102efd528b66b55be22ce0191022c3cc51842a761d81e963cde43a8ac340482080fffffffff6f3ad3e8965efda06fb96e65f0f66e936750f7144215ea10626aa81251b974bd000000006b483045022100ed2126816c6156d7c82b28686469156254b8fc101c150043ec0e7ae025938b9e0220211336509e47de4cf46546af30e2b43daccbe7a48462f6113dc705a309eab4be0121025c226c369bbefa0c9e0d0ba6a6368e5e33f36fdfc8e0e2f32ff70150d1bb5a8fffffffff0525265ceccf683ddfa61f01cdce16f847f49f4f0a83c0c1ea50988cde0be928000000006a4730440220246cfe2996b6b09c5e06d8cf595268953849391d48652192c4dbcfec8b3a0ef802207ce60176d436af80bc135d1b9273d6de0496e060007539914bc8a9a949f1fcac0121035c2622be7dad91bccb55e144d113ec96e13a21dca51cff79c15e8dd5a47399e1ffffffffde394d483f60ac96888118e1aab7bedcaec2c72c761fcc94e612a689d27ac97b000000006b483045022100b68d337b87339a7f3cc7d65b4ed06b7034e6e96ecdf7280713d551c17dd94986022033b3d92bd2bd2dbb3df1be1354f80f195eb7e58e0a59a4f24b09d4cbf9ba91af012103d7df760be6c91607c97fd3120232c093f7749105f92b1bac9276a068de1e409affffffff1486e673580d5760b8cae984537d6f1af6dab283062f237a773b49758e955e41000000006a47304402206482a8506a7ab04bede2159d176bc373234d3bdca4a91a2822b599f1e925d15d0220134e8a653953e160d60ecba7afef4606952a9e2fba1f5405f4a89e9088fb71a601210251fddce6e92bcf4c0ac11708ead837128edff933717dd5605dbcc91d862b5d6fffffffff97624920ff3286d8f1ca0ef8a30c83badf7dd1d0003c35f9a0f825f1558fbced000000006a4730440220754b91f162155e05504aaf15f3d0ac14645c200fb3135fe113c730be3ed9e18d022069546978d2d115d72558199570fb0df95de76d229977085f6cc22f7c8d35b450012102e06c3f5e2a44c9964c05d1ebb92548bf124ed4c8b5ba883e79cc6f7eaf85925dffffffffe26f61b3fffb85e9071af86e3dc98335258e9d19ceecce5ad8c8fcc53d249c5e000000006a47304402200d24060cc388360b0aeb28a4a722c0395aabf886d44367d3eb1bad3d2c1c4862022020458a601c9db9f47b70d5a3671f9b94bbcc0294a69d44ab6575c0fda10431400121038c7adfa5de914bff2f59a71385368b4fc7b314b905271ea80cae66b1a481cecbffffffffeefd934997212c9fb65f6f5db5d650dd0b853c27608439e8af10c1b24a8528fd000000006b483045022100c602f1bb4ef24f401d5f044cf0874e5b1d4721a74ff6cb500fac38c8bac0bf9d022075ec521e072ed193f1d0f0bbe63555ef34e4ba6aa3733ad5d33eb0eb6e7c577601210347fbddaa4e6b4c6773d6bf57ff266a7c45f37f7705561ced1fbd4fdfc2ba0be2ffffffffb399e49354fb1ecd3520701c91ba73e00bf888bdb3fdc39074065084bf4b2138010000006b483045022100f89ed7890ec4ce9b068de80cfef3eca28e842f23de5ddf6d24bab320bb9468fc02200b038e44e6f3fc32095bcf3e6a953a244c73658bb55fb612d795025253b65f8d01210386ec00a69e2eddfb9b43e65684873a4ccbf09cc1a76505de37b8709c1fc91a3effffffffe0ed56d9e14324488344b88dd6a2ec58176ee1bc09eb8255d1848513ce08fc18000000006b483045022100f86e3da66b99a1f491afa952719798a53626f154cf62d29e38bd159fbe2c25ca02205636bea5e5ccf85d4508970b17ec2ecf8bee88cfdafcd16409eb6d0456e0d3e5012102aa42ffb810ddc2251bf5ac1b515188590b8ae1b6495efc232b5407cadc79d3d9ffffffff299b58d5f51ab43159109017e739d3dd3e8cdf3a0ee189eee05f4e5685ef9d5b010000006a47304402203a42c31e334993e2b7f6907259b90a7f8d063ce358008d06f66cf56ac95c54ae02205c3ed0086c26035cfd72cb578702e384ab3ea40463ab2a5cece911304b7a2ea10121037b6dc8562eb908a9648944622cdd52297aa832616c2d43457f7a3d8f440449f3ffffffff5353d0ba2ca11dfb0af9f6916812ff14da8c1e91eba45d4ef696926c4b3e82f6000000006b483045022100b6a259619642405151fe10a5ad2f1e9bc75620542e8a84aaaa0a5af679624ec602205a242fbd948c5b472f2144c44d8c15cafd5f6cf01f2964f94ae2ebb6ab7194fd012102781aef8080f0917ccba5e6a774948d35818041de0ed80adfd9ad10d92a776385ffffffff6dbeb4f64ce362876b6948e1e1ede9830b96ebf87ec6909ec568f29b4efea78d000000006b4830450221008fc59b8183d2ce82f881a910b5979cb776a67df8fbbdc06a1bb3092fed69388302204d9b57aecb18c475941fda2c1fb9cc3d8eaaa8dd1a06eeba2fd6d6ca89283c0b0121030f85040d08800de72677b52c28a09a72e2e754f1e24839dc0d1c31767cf835f3ffffffff0b72c0425a4c7ff1c76da2304ddd6d7eccb663940c1f394e4971800381dc01bb010000006a4730440220365c6e9732111f0eb20d96f4c5b65b34d1af2a7acdd9c62058314dbcca09ab0202205d4fee1ce4a0089a391c26b98cd003649c9361e3e1eaf81babc0ce4d871e601901210231b723004556c6811d76ac51adf4a266ec41981b53ec7431c874234cb8b6bf37ffffffff2e962f8a9b76a2d8c35834600ce17323c5940f064b8156e2c0fee2536774a81c000000006a473044022075734047cbfe8e66d7edbbb7b0e1d14c497e8e48c04ac62bac61941108abe98b022008140452a93b3818a66b4a98d284325a7d880fba0f3ca1079d9541425d8c7fbf01210231b723004556c6811d76ac51adf4a266ec41981b53ec7431c874234cb8b6bf37ffffffff08a551492a97f49afe475d3031336fe4ce63124d6e4067f9a5e39d6a9744433a000000006b4830450221008694bc432e258a137ae71075b0e43ea4f703acecc1e29b7b4e052402e67f005f0220432874c014fb0d3e9e0dac2a480f178af44826c4f1834f9deec53bb891f2973001210231b723004556c6811d76ac51adf4a266ec41981b53ec7431c874234cb8b6bf37fffffffffacc4083e3aa8d71a4c799e2eb3bc1051c10122a6824917081c08684408e5867000000006a47304402207153b5370ec13f0404da76ea627ea0a8649f210ea70f408be39809ee4a9bd7f30220496de611a2042f27c3e1e2a45bbb28e4f4d70c34c197ceb111d723c691ba3fd0012103b2eebd3648cc78f70e1a0194cd2d6eca373c3b735f6cc7aae61e7715d9dc4d14ffffffff9856735cb9dcc7ff8eef825568bf7b85d88c977661427412e9631b737626712a010000006a4730440220211bf4752d15f8befe90ac1432425b4df6e14112a028c6c8d106164b516b3c7302205020b999955704b943e95ae120ee84b8ca99e1524831b4c1ceaed64be0460e2e012103cd475975cd079d0c29129ad9ab34e87e10ff1da52c35a4b039ca1f1e777ea704fffffffff06de0e495db2a790e9cd717d1bef869a75ebcb876296aa7adee3f716b4eb38c000000006a473044022020100c8e9805fed48f51dc4888b3f2f1ca969ad3f9f939ca549ba366a05777e602206f3c5a176108f6dab93379c1bb27cdaded6327b804453e85a3cad0dbfe6695aa0121021fa9aa37ec32bc30bdc26ee1a7509ea7af23a4df54bbfadad2be74b3ad9556d1ffffffff796c042db77045204cc02c15d630865f8b5469f01c59fdc5e2441addb5579183000000006b483045022100ee9eb6445c7118453531b998fb9ef0865fc3be0d4651e3cb5cc36026798d8eb10220408d78e892e1fbd085c9048791590f3ac48da029bb592f49b6cf8b79b20c41b20121021fa9aa37ec32bc30bdc26ee1a7509ea7af23a4df54bbfadad2be74b3ad9556d1ffffffff966c29564a342513c3be7c5a048302056d1a2cd309d18be76e3f75f67fc0f760000000006b483045022100ceec2d0c085516a26b841b853a325d5c5236a2066ed00997ffc106889e03da4f02203a16ab2056df5635100cb7d4e6978006416667d21193bd06520c263cc1605cef01210387572748ac4e80cc28970a1b87e58bd8ce5b3a1514f294b5fffb18fec34fb102ffffffff7e49505a90b8b5e39f29fa53bbe3a257311b0dc3efa6af0c8d5e16247560cc5a000000006a4730440220208894ec6c9701ff3c950d49b843851480bb900c3094eff58c9cc4e8f722f314022016840d6f3bd965154b194b4b6fe2c3d4ea28279184641201d9181ab81f13df7f01210376dbbdb84c10d57d443ab305f4efe8e00bd029b29e0b28bcc211e0957ac315a7ffffffffcf55b208022fed89a4e52c8ea1f745d9e1e0fdafeafdf9f076e5ad77bc98979a000000006b483045022100de5fa9969ab9814f6f5bdb621257bf66fb94f3590c7d8166770734abcc12978f02205ae2b8dc17ddb368c2f1ed9ff957ea43824977c551d31433aa71364f48a278a00121025867ab0adc08d65f43a4704a7721de1db58ea0d1ebaf8e7ad8fd491ad33bedb8ffffffffdb805a2466f50b79f6a3938b2831080e144dd409916029e07275cc0a28302b9f000000006a47304402202a088f0c5f487c928e82446fcebd518fe39e6d02b7fa5d87dd08d4f19b46b7e30220716388df2b6bad35cbba6d8494c59dfb4ae984ce4a997b5431c49fdf6531db0001210284d8686422dfd23a8d20eb0e6a6a19800a709f060cc15c47af8d71f4abdaa563ffffffff73b2d2dcb9bcff4a963ec0549942d9f3aa4a5ff03c34cbd840d33c3b8db12532010000006a4730440220023bfb597a396a7ec8440674e5502a764e0083702b0e9cf13bf5de95d02efdd80220169305131d332c66588125094d911dfb469041a9df62cc820376135e6016100e01210360e4bd1384754b929d45e5718b67d2dc9e883d0678cc3d9b99c3da8955d35969ffffffff31393612f494583bc80f5bc70d6778c92ce7b4b3512685e47560b1813af6a434000000006b483045022100e8639d59ac6ebe6737acb9e401f4d318800630fed8384d4d7187c84ad6ef7b5702203e455db291405b18e3527bfeac998eeb67d2731d7c56bd7c9c1e96852418a0ac0121023ceb4810d1a8d7c2618c4999c4e4adf02b18656059ecaae9d21adb83c9dc0669ffffffffc531d37d3149e043f288c9a15c691cbfc02464a0209c847eaac55d0a77cd2342000000006a47304402207883940aa5910877e35c3e86213403cf4ea87d5c601e673c9fbde2e7c22153d1022040ac3b20a453b4ccdf8926a3b85600d4ae2eec022f92936e80cb5c887929038601210396e42cb9bb80bb62621bd04be707f6665eef4e41c990dfb528bee7305a66dc54ffffffff7594c000a7083990753aefba694819d803b4f122a43107e0f87e1aa0ec831d67000000006b483045022100cf15e7debcd128e5bd66e3ee0997df2740a8d22cd53e23d152358140fcdc143702202fa1d2481b1131d8660179c63a8d27da24257fd644051ff4b9202fd0d2880fb00121031143b87cc6f0306d0143c4c926599406262b3aaa84125ff68d39de0af0599194ffffffffae83ecb2b29f9c75c706328140d105f46e60ec02e794b84d23becd2f64f054eb010000006b483045022100e09ba0c1eb9cb7fab247ca168aec533883d2b0d1d32c5322c6db03f5f6634ca702201d6b022990b8fd8067641bfd2a56321c3e4921beeefc71accbdd8717505322ae0121028f46ef6e4a1b578d69af29b44ef8cb886326b963e6f2a69cb613519435654349ffffffffd097885aea28e9d9d9c4122c4d9c5759d4c7412df81e35abc007e980f0d25bd5000000006a47304402202eb770fbdf93de29c559f5ac4be119ca4ce1f16ed3f2743c5493be439ce9364b02205eb18ada31d089879534286d1dfc7ec151dd36cd2cae7a88e928d97d6740543201210387e39aeec63370e580affe9ceb5287b93642d0049b2f4562dc8ec5d7665a9e1fffffffff00b82c5288f3e257e5413b20ce72c1c5fa0a0aec5052521f1b592caf663edafa000000006b4830450221008650e75340aae6f9f393a29fda91423b78c232e3a9541558a876fd5e4ff4bd8e0220205475cf7fcb651c32ef6189699cf1771d7454d3fe29e9d482e0e8967458ba73012102c645cf74cab7634da555fd8897230571b4a7db670eae3a5c375b614062b99572ffffffff14a36105aba389230f1c8159931f5fd9fc0bec872ccc8904249c93ac91713013000000006b483045022100efde2c396f938f6a8f702eea12c1541450edcd63c66ec65fbe728d9db9464d3702207e44322aece2a6c48d36733cd2c7501696176253151d83dcf77737da23aac98c012102f603dbda7aaf3d32f2a0d575f8decf9225e31a3483b7064fbd21eb1ddbd59156ffffffff4c6ed04394ac0feb2e443b57e71d8c9ef601034c8d6e3afdac532e9fad785925000000006b483045022100aae2a57d009cf07db09c43cf0d7a22e5db9e76a4ec3dee54647fc95ca193386402200fdaddfdf86f5da91dae4c5561ef09e528e3203bafbf113e05fe77068016d08b0121027dd8184c842e4173d744453d84502852fd7806e143347a76489248f124cb80b7ffffffff69c33ec72034ece18158b4479352f224cfeb4ff3388daab079c70c01223d0200000000006b483045022100d0752f51849ab71e1a705b64ec819286d47066fbe4e0ad4a2ff83592655ea8050220553fda3a97ddbeaf8423eec76abbffe3ecf7019f35b8c0feab9954e08f596177012102c5ad13bc913aa376684b0b2efdf24d5e00256b882d666f32bbcd1b566b83dc7bffffffff81169be019594e42c02b58967119c64fbb71928a9c6c271490e32f4d7a84dd77050000006a47304402203a5ae0441b05c3bb7c44949ad64ad7e52b99ee1c971f8be81724d486d1164c42022001869f42cb5f444897d96c5f20f9e2782cbf4651073bbfa53f0abe8526394e36012102fefd6e1cf9ccb283f0b003886b2d54fec5eef1033f49b96870c8a88b05346a18ffffffff0d193407be87c71a13e4e8c2c1e5d06d807033bdd30c14f0085e37722d6496e3000000006a47304402202b6140cd71b462941c7fcb4438837cb773794f558027edfdbbda44138af095d80220462c1b0415e4d384462f2d4e7909897530fff34051645c7851db50f70681ef0e01210311cced19e8da93679a6316bb9f54dd2ee8a553394dbd6b96a8c37b82474003f3ffffffff3fc026d9c84536e88924faa893b88246209847d6796c27ef1d1b9273c326ce4e000000006a473044022077c54ec95d60f171eccc05f6b38bfc5e7f94405e23394d60f85fc764a26ec0e5022041962a8068e2be5bed4dea0e7af56589e1a4633b142f3bb239c6f6376813f5ae012102dfaf67f22c9222661e8078fbb92e1c1b7689a4493034683951eef785920771faffffffff431a721b21b0fa2466ba4ac1384d042e8955ca7ff1cf9932901baad6325d02b4070000006b483045022100cfa1f94f65ea94ab7a97f13773f2100765d7287e1df1b2454972a166b7a31a6d02205f146833266c8c854c3da4a3494876200de3008fa16e80e4f2dcb64723e89ebe012102eab3b4c1f1f1809cbced1daf635cc10dffee16f3916d9646f0f7de759f90e904ffffffffde40f171245e43a2e95807926344092b36e877150fa1bbc9c8b777e7d40f8673000000006a4730440220703632f1a81e610f18a5270dfa55d5beda3ceeeb6cd62f7bdfbb38bfd7f2e69d022000a77393e69cdf942668168271a4de6b68e8884b953c3a01fca690c0265dbf5801210318af817791aee7d2efa9a3d057155009ee00cfb08496ee5b7238edf182194f81ffffffffc5e6bf81b2b264f3a3ac6200818ec3e527ab6319882c6a661312f52207396718000000006a4730440220187bd17a9e291c8f8ca52f414387ee010a86609e49f82cbc8aa6128ea384c9f702205935fe47fe936c14137d4e70e75a214067ce5d537a28768d8a29c5d6af8b9ac00121026bbe8e7c3c74dbd0290a1f72bc7dd4e2b2bd812870af4c33b5637ef2e113aaf8ffffffffd54ffeb27de15561436170a72ff6c34aee53545a90be500b69f83984d9b78d91000000006a47304402201020178288efea8bd65942b5dcd3d7152c6cb5971d056db4001f5b4323e8eaf90220750677d111a014454dfee37c52c3f687adb8a874e07ad652705237687349682c0121038c5e90c37ff694afbf6fcbeafe0eb326ada653dde2125bce053c71bcc11eaa90ffffffffc8e9f232d11c31f17ee6ec25c3f745123e2af31f1b529e1e399b5420ed78aa9c000000006a4730440220256c2966db0cc5c22becb863d81d6336c0ad079100e1cb60f3b221c245d43d9902207115926be5a0f839b5c7784ba7e51057f272db0328c385222fe54545d4b4527201210291e035b0f8d4b96e33510cae0321af9635d1a1edc781c99729ea27ee468b03cdfffffffff314a5726e6b023f9e2fbfc8eaab3dfe2e0c84d09c975c1e678bca6662084484000000006b483045022100e26622bcf7df8af80ea53fb4bd7a39a509fc679e3928e71a9a0486690d2b235f02201375299a225a275c480bfff23b1a5e74ca27b28ecb97d4f40032e5e4c3382d500121037823543c63d98d66254466d97e3a6795aaed917edc487559d155d2d115ed2194ffffffff01de37dd3c00000000160014dc6bf86354105de2fcd9868a2b0376d6731cb92f00000000";
        BitcoinTx memory parsedTx = BitcoinTxImpl.fromMemory(data);
        // console.log("%x", parsedTx.getVersion());
        // console.log("%x", parsedTx.getLocktime());
        return parsedTx.getHash();
    }

}
